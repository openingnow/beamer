\ProvidesPackage{beamerlayoutthemesidebar}[2004/04/21 ver 0.1]
\NeedsTeXFormat{LaTeX2e}[1995/12/01]

% Copyright 2003 by Till Tantau <tantau@cs.tu-berlin.de>.
%
% This program can be redistributed and/or modified under the terms
% of the LaTeX Project Public License Distributed from CTAN
% archives in directory macros/latex/base/lppl.txt.


\newdimen\beamer@sidebarwidth
\newdimen\beamer@headheight
\usebeamerfont{frametitle}
\beamer@sidebarwidth=2.5\baselineskip
\beamer@headheight=2.5\baselineskip
\reset@font

\def\beamer@lefttext{left}
\def\beamer@sbt@bg{\beamertemplatesidebarcolor[\beamer@sidebarside]{beamerstructure}}

\DeclareOptionBeamer{hideothersubsections}[]{\beamer@nav@subsectionstyle{show/show/hide}}
\DeclareOptionBeamer{hideallsubsections}[]{\beamer@nav@subsectionstyle{hide}}

\DeclareOptionBeamer{sidebarshade}{\def\beamer@sbt@bg{\beamertemplatesidebarverticalshading[\beamer@sidebarside]#1}}
\DeclareOptionBeamer{cornercolor}{\def\beamersidebar@cornercolor{#1}}
\DeclareOptionBeamer{width}{\beamer@sidebarwidth=#1}
\DeclareOptionBeamer{height}{\beamer@headheight=#1}
\DeclareOptionBeamer{left}{\ExecuteOptionsBeamer{side=left}}
\DeclareOptionBeamer{right}{\ExecuteOptionsBeamer{side=right}}
\DeclareOptionBeamer{side}{\def\beamer@sidebarside{#1}}
\DeclareOptionBeamer{tabcolor}{\def\beamer@sbt@tabcol{#1}}
\DeclareOptionBeamer{headcolor}{\def\beamer@sbt@headcol{#1}}
\DeclareOptionBeamer{titlecolor}{\def\beamer@sbt@titlecol{#1}}
\DeclareOptionBeamer{authorcolor}{\def\beamer@sbt@authorcol{#1}}
\DeclareOptionBeamer{sectioncolor}{%
  \expandafter\def\expandafter\beamer@sbt@sectioncola\expandafter{\@firstoftwo#1}
  \expandafter\def\expandafter\beamer@sbt@sectioncolb\expandafter{\@secondoftwo#1}
}
\DeclareOptionBeamer{subsectioncolor}{%
  \expandafter\def\expandafter\beamer@sbt@subsectioncola\expandafter{\@firstoftwo#1}
  \expandafter\def\expandafter\beamer@sbt@subsectioncolb\expandafter{\@secondoftwo#1}
}
\ExecuteOptionsBeamer{%
  cornercolor=beamerstructure!75!black,%
  tabcolor=beamerstructure!70,
  sectioncolor={{beamerstructure!25}{beamerstructure!25}},
  subsectioncolor={{white}{white}},  
  titlecolor=white,
  headcolor=beamerstructure,
  authorcolor=beamerstructure!50!averagebackgroundcolor,  
  side=left}
\ProcessOptionsBeamer



\mode<presentation>

\ifdim\beamer@headheight>0pt
% if head height is 0pt, use default frame title

  \useframetitletemplate{%
    {%
      \nointerlineskip%
      \vskip-\beamer@headheight%
      \vbox to \beamer@headheight{%
        \vfil
        \leftskip=-\beamer@leftmargin%
        \advance\leftskip by0.3cm%
        \rightskip=-\beamer@rightmargin%
        \advance\rightskip by0.3cm plus1fil%
        \color{white}%
        {\usebeamerfont{frametitle}\insertframetitle\par}%
        {\usebeamerfont{framesubtitle}\insertframesubtitle\par}%
        \vbox{}%
        \vskip-1em%
        \vfil
      }%
    }%
  }

  \useheadtemplate{%
    \hbox{%
      \hskip-\Gm@lmargin%
      \ifx\beamer@sidebarside\beamer@lefttext%
        \color{\beamersidebar@cornercolor}%
        \vrule width\beamer@sidebarwidth height \beamer@headheight%
        \hskip-\beamer@sidebarwidth%
        \hbox to \beamer@sidebarwidth{\hss\vbox to
          \beamer@headheight{\vss\hbox{\insertlogo}\vss}\hss}%
      \fi%
      \color{\beamer@sbt@headcol}%
      \@tempdima=\paperwidth%
      \advance\@tempdima by-\beamer@sidebarwidth%
      \vrule width\@tempdima height\beamer@headheight%
      \ifx\beamer@sidebarside\beamer@lefttext%
      \else%
        \color{\beamersidebar@cornercolor}%
        \vrule width\beamer@sidebarwidth height \beamer@headheight%
        \hskip-\beamer@sidebarwidth%
        \hbox to \beamer@sidebarwidth{\hss\vbox to
          \beamer@headheight{\vss\hbox{\insertlogo}\vss}\hss}%
        \fi%
      \hskip-\Gm@rmargin%
    }%
  }
\fi

\def\beamer@colorbox#1#2{%
  \ifx#1\@empty#2\else\hbox to \beamer@sidebarwidth{\fboxsep=0pt\colorbox{#1}{#2}}\fi}%
\def\beamer@buildsidebarbox#1#2#3{%
  \setbox#1=\hbox{%
    \vbox{%
      \hsize=\beamer@sidebarwidth%
      \leftskip=#2%
      \rightskip=1ex plus 1fil%
      \parskip=0pt%
      \vbox{}%
      #3\par%
      \vbox{}%
      \vskip-1.5ex%
      }}%
  \wd#1=\beamer@sidebarwidth%
}
  
                                % Sections in sidebar
\usesectionsidetemplate
{%
  {\usebeamerfont{section in sidebar}%
    \vbox{\vskip1ex%
      \beamer@buildsidebarbox{\beamer@tempbox}{3pt}{\color{\beamer@sbt@sectioncola}\insertsectionhead}%
    \beamer@colorbox{\beamer@sbt@tabcol}{\box\beamer@tempbox}%
    }}%
}
{%
  {\usebeamerfont{section in sidebar}%
    \vbox{\vskip1ex%
    \beamer@buildsidebarbox{\beamer@tempbox}{3pt}{\color{\beamer@sbt@sectioncolb}\insertsectionhead}%
    {\box\beamer@tempbox}%
  }}%
}

\usesubsectionsidetemplate
{%
  {\usebeamerfont{subsection in sidebar}%
    \beamer@buildsidebarbox{\beamer@tempbox}{5pt}{\color{\beamer@sbt@subsectioncola}\insertsubsectionhead}%
    \beamer@colorbox{\beamer@sbt@tabcol}{\box\beamer@tempbox}%
    }%
}
{%
  {\usebeamerfont{subsection in sidebar}%
    \beamer@buildsidebarbox{\beamer@tempbox}{5pt}{\color{\beamer@sbt@subsectioncolb}\insertsubsectionhead}%
    {\box\beamer@tempbox}%
  }%
}

                                % Foot
\usefoottemplate{}


\ifdim\beamer@sidebarwidth>0pt

                                % Sidebar
  \usesidebartemplate[\beamer@sidebarside]{\beamer@sidebarwidth}{%
    \beamer@tempdim=\beamer@sidebarwidth%
    \advance\beamer@tempdim by -6pt%
    {\usebeamerfont{title in sidebar}%
      \vskip1.5em%
      \hskip3pt\color{\beamer@sbt@titlecol}%
      \insertshorttitle[width=\beamer@tempdim,center,respectlinebreaks]\par%
      \vskip1.25em%
    }%
    {%
      \hskip3pt\color{\beamer@sbt@authorcol}%
      \usebeamerfont{author in sidebar}%
      \insertshortauthor[width=\beamer@tempdim,center,respectlinebreaks]\par%
      \vskip1.25em%
    }%
    \insertverticalnavigation{\beamer@sidebarwidth}%
    \vfill
    \ifx\beamer@sidebarside\beamer@lefttext%
    \else%
      \llap{\insertnavigationsymbols\hskip0.1cm}%
      \vskip2pt%
    \fi%
  }%
  
                                % Side bar background
  \beamer@sbt@bg

  \ifx\beamer@sidebarside\beamer@lefttext%
    \usesidebartemplate[right]{0cm}{%
      \vfill%
      \llap{\insertnavigationsymbols\hskip0.1cm}%
      \vskip2pt}
  \fi
                                % Margins
  \beamersetleftmargin{0.5cm}
  \beamersetrightmargin{0.5cm}
\fi

\mode
<all>

%%% Local Variables: 
%%% TeX-master: "~/texmf/tex/latex/beamer/test/test.tex"
%%% End: 
