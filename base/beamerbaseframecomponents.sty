\ProvidesPackage{beamerbaseframecomponents}[2004/01/10 ver 1.20]
\NeedsTeXFormat{LaTeX2e}[1995/12/01]

% Copyright 2003 by Till Tantau <tantau@users.sourceforge.net>.
%
% This program can be redistributed and/or modified under the terms
% of the GNU Public License, version 2.



\mode<presentation>

%
% Setting the left and right margin
%
%
\beamer@leftmargin=1cm
\beamer@rightmargin=1cm

\define@key{beamer@margin}{left}{%
  \beamer@leftmargin=#1\relax%
  % Reset left margin now
  \beamer@tempdim=\beamer@leftmargin%
  \advance\beamer@tempdim by\beamer@leftsidebar%
  \geometry{left=\the\beamer@tempdim}%
}
\define@key{beamer@margin}{right}{%
  \beamer@rightmargin=#1\relax%
  % Reset right margin now
  \beamer@tempdim=\beamer@rightmargin%
  \advance\beamer@tempdim by\beamer@rightsidebar%
  \geometry{right=\the\beamer@tempdim}%
}


\newcommand{\setbeamermargin}[1]{\setkeys{beamer@margin}{#1}}

\mode
<article>
{
  \newcommand{\setbeamermargin}[1]{}
}


\mode
<all>
{
  \def\beamersetleftmargin#1{\setbeamermargin{left=#1}}
  \def\beamersetrightmargin#1{\setbeamermargin{right=#1}}
}


%
%
% Sidebars
%
%

\newcommand\usesidebartemplate[3][left]{%
  \csname beamer@#1sidebar\endcsname=#2\relax%
  \expandafter\beamer@tempdim\expandafter=\csname beamer@#1margin\endcsname%
  \advance\beamer@tempdim by#2\relax%
  \expandafter\geometry\expandafter{#1=\the\beamer@tempdim}%
  \expandafter\def\csname beamer@#1sidebartemplate\endcsname{%
    \vbox to \sidebarheight{%
      \usebeamerfont*{sidebar}%
      #3\vfil%
    }%
  }}

\usesidebartemplate[left]{0cm}{}
\usesidebartemplate[right]{0cm}{}


\newcommand\usesidebarbackgroundtemplate[2][left]{%
  \expandafter\def\csname beamer@#1sidebarbackground\endcsname{%
    \vbox to \sidebarheight{%
      #2\vss%
    }}}
\usesidebarbackgroundtemplate[left]{}
\usesidebarbackgroundtemplate[right]{}


%
%
% Background management
%
%
\mode
<all>
{
  \long\def\usebackgroundtemplate#1{%
    \def\beamer@backgroundtemplate{#1}}
}


%
%
% Head lines and foot lines
%
%

\let\@mkboth\@gobbletwo
\def\ps@navigation{
  \def\@oddhead{%
    \begingroup%
    \setbox\beamer@tempbox=\hbox{\normalcolor{\beamer@backgroundtemplate}\hyper@pagetransition\hyper@pageduration}%
    \beamer@tempdim=\ht\beamer@tempbox%
    \setbox\beamer@tempbox=\hbox{\lower\beamer@tempdim\hbox{\box\beamer@tempbox}}%
    \wd\beamer@tempbox=0pt\ht\beamer@tempbox=0pt\dp\beamer@tempbox=0pt%
    \vbox{\hbox{\hskip-\Gm@lmargin\box\beamer@tempbox}%
      \hbox{%
        {%
          \setbox\beamer@tempbox=\hbox{\hskip-\Gm@lmargin%
            {\setbox\beamer@tempbox=\hbox{\normalcolor\beamer@leftsidebarbackground}%
              \wd\beamer@tempbox=0pt\ht\beamer@tempbox=0pt\dp\beamer@tempbox=0pt%
              \box\beamer@tempbox}%
            {\beamer@leftsidebartemplate}}%
          \beamer@tempdim=\ht\beamer@tempbox%
          \setbox\beamer@tempbox=\hbox{{\lower\beamer@tempdim\hbox{\box\beamer@tempbox}}}%
          \wd\beamer@tempbox=0pt\ht\beamer@tempbox=0pt\dp\beamer@tempbox=0pt%
          \box\beamer@tempbox%
        }%        
        {% print right sidebar first, since it should be overwritten by headline
          \setbox\beamer@tempbox=\hbox{\hskip\textwidth\hskip\beamer@rightmargin%
            {\setbox\beamer@tempbox=\hbox{\normalcolor\beamer@rightsidebarbackground}%
              \wd\beamer@tempbox=0pt\ht\beamer@tempbox=0pt\dp\beamer@tempbox=0pt%
              \box\beamer@tempbox}%
            {\beamer@rightsidebartemplate}}%
          \beamer@tempdim=\ht\beamer@tempbox%
          \setbox\beamer@tempbox=\hbox{{\lower\beamer@tempdim\hbox{\box\beamer@tempbox}}}%
          \wd\beamer@tempbox=0pt\ht\beamer@tempbox=0pt\dp\beamer@tempbox=0pt%
          \box\beamer@tempbox%
        }%
        \normalcolor{\beamer@headtemplate}\hfil%
      }%
      \hfil}%
    \endgroup}
  \def\@oddfoot{\vbox{\offinterlineskip\hbox{\normalcolor{\beamer@foottemplate}%
        \hypertarget{Navigation\the\c@page}{}%
        \hypertarget{page.\the\c@page}{}\hfil}\hbox{}}\hfil}
  \let\@evenhead\@oddhead
  \let\@evenfoot\@oddfoot}
\pagestyle{navigation}

%
% Patch empty page style, so that transitions and navigation still works
%
\def\ps@empty{%
  \let\@mkboth\@gobbletwo%
  \def\@oddhead{\begingroup%
    \setbox\beamer@tempbox=\hbox{{\beamer@backgroundtemplate}\hyper@pagetransition\hyper@pageduration}%
    \beamer@tempdim=\ht\beamer@tempbox%
    \setbox\beamer@tempbox=\hbox{\lower\beamer@tempdim\hbox{\box\beamer@tempbox}}%
    \wd\beamer@tempbox=0pt\ht\beamer@tempbox=0pt\dp\beamer@tempbox=0pt%
    \vbox{\hbox{\hskip-\Gm@lmargin\raise\headheight\box\beamer@tempbox}\hfil}%
    \endgroup%
  }
  \def\@oddfoot{\normalcolor{\hypertarget{Navigation\the\c@page}{}\hfil%
    \setbox\beamer@tempbox=\hbox{{\insertnavigationsymbols}\hskip-\Gm@lmargin\hskip2pt}%
    \ht\beamer@tempbox=0pt%
    \dp\beamer@tempbox=0pt%
    \box\beamer@tempbox}}
  \let\@evenhead\@oddhead\let\@evenfoot\@oddfoot}

\def\beamer@calculateheadfoot{%
  \setbox\beamer@tempbox=\hbox{{\beamer@foottemplate}}%
  \footheight=\ht\beamer@tempbox%
  \advance\footheight by \dp\beamer@tempbox%
  \advance\footheight by 4pt%
  \setbox\beamer@tempbox=\hbox{{\beamer@headtemplate}}%
  \headheight=\ht\beamer@tempbox%
  \headdp=\dp\beamer@tempbox%
  \advance\headheight by\headdp%
  \sidebarheight=\paperheight%
  \advance\sidebarheight by-\headheight%
  \advance\sidebarheight by\headdp%
  \advance\sidebarheight by-\footheight%
  \advance\sidebarheight by 4pt%
  \footskip=\footheight%
  \textheight=\paperheight%
  \advance\textheight by-\footheight%
  \advance\textheight by-\headheight%
  \@colht\textheight%
  \@colroom\textheight%
  \vsize\textheight%  
}


 
  
\def\usefoottemplate{\@ifstar{\beamer@usefoots}{\beamer@usefoot}}

\newcommand{\beamer@usefoot}[1]{
  \long\def\beamer@@foottemplate{#1}
  \def\beamer@foottemplate{\parskip0pt\offinterlineskip{\usebeamerfont*{footline}\def\\{,}\beamer@@foottemplate}}}%

\newcommand{\beamer@usefoots}[1]{
  \long\def\beamer@@foottemplate{#1}
  \def\beamer@foottemplate{%
    \offinterlineskip{\parskip0pt%
      \hbox{\hskip-\Gm@lmargin\hbox{\vbox{\hsize=\paperwidth\textwidth=\paperwidth%
            \usebeamerfont*{footline}\def\\{,}\beamer@@foottemplate%
            }}\hskip-\Gm@rmargin%
    }}}}%

\newcommand\addtofoottemplate[2]{%
  \long\def\beamer@temp{#1}%
  \def\beamer@@temp{\long\def\beamer@@foottemplate}
  \expandafter\expandafter\expandafter\beamer@@temp\expandafter\expandafter\expandafter{\expandafter\beamer@temp\beamer@@foottemplate#2}
  }



\def\useheadtemplate{\@ifstar{\beamer@useheads}{\beamer@usehead}}

\newcommand{\beamer@usehead}[1]{
  \long\def\beamer@@headtemplate{#1}
  \def\beamer@headtemplate{\offinterlineskip{\parskip0pt\usebeamerfont*{headline}\beamer@@headtemplate}}}%

\newcommand{\beamer@useheads}[1]{
  \long\def\beamer@@headtemplate{#1}
  \def\beamer@headtemplate{%
    \offinterlineskip{\parskip0pt%
      \hbox{\hskip-\Gm@lmargin\hbox{\vbox{\hsize=\paperwidth\textwidth=\paperwidth%
            \usebeamerfont*{headline}\beamer@@headtemplate%
            }}\hskip-\Gm@rmargin%
    }}}}%

\newcommand\addtoheadtemplate[2]{%
  \long\def\beamer@temp{#1}%
  \def\beamer@@temp{\long\def\beamer@@headtemplate}
  \expandafter\expandafter\expandafter\beamer@@temp\expandafter\expandafter\expandafter{\expandafter\beamer@temp\beamer@@headtemplate#2}
  }

\def\insertpagenumber{\thepage}



%
%
% Columns
%
%
\define@key{beamer@col}{onlytextwidth}[true]{%
  \def\beamer@colentrycode{\hbox to\textwidth\bgroup\ignorespaces}%
  \def\beamer@colexitcode{\unskip\egroup}}
\define@key{beamer@col}{totalwidth}{%
  \def\beamer@colentrycode{\hbox to#1\bgroup\ignorespaces}%
  \def\beamer@colexitcode{\unskip\egroup}}
\define@key{beamer@col}{c}[true]{\def\beamer@colalign{c}}
\define@key{beamer@col}{t}[true]{\def\beamer@colalign{t}}
\define@key{beamer@col}{b}[true]{\def\beamer@colalign{b}}

\newenvironment<>{columns}[1][]{%
  \begin{actionenv}#2%
  \def\beamer@colentrycode{%
    \hbox to\textwidth\bgroup%
    \leavevmode%
    \hskip-\beamer@leftmargin%
    \nobreak%
    \beamer@tempdim=\textwidth%
    \advance\beamer@tempdim by\beamer@leftmargin%
    \advance\beamer@tempdim by\beamer@rightmargin%
    \hbox to\beamer@tempdim\bgroup%
    \hbox{}\hfill\ignorespaces}%
  \def\beamer@colexitcode{\egroup%
    \nobreak%
    \hskip-\beamer@rightmargin\egroup}%
  \ifbeamer@centered\setkeys{beamer@col}{c}\else\setkeys{beamer@col}{t}\fi%
  \setkeys{beamer@col}{#1}%
  \par%
  \beamer@colentrycode%
  \def\beamer@colclose{}\ignorespaces}%
  {\beamer@colclose\def\beamer@colclose{}\beamer@colexitcode\end{actionenv}}%
  
\mode
<article>
{
  % do sth. more intelligent in the future
  \newenvironment<>{columns}[1][]{}{}
}




%
%
% Column command/environment
%
%

\mode
<all>
{
\def\beamer@columnname{column}
\def\column{%
  \ifx\@currenvir\beamer@columnname%
  \let\beamer@next=\beamer@columnenv%
  \else%
  \let\beamer@next=\beamer@columncom%
  \fi%
  \beamer@next}
}

\newenvironment<>{beamer@columnenv}[2][\beamer@colalign]{%
  \beamer@colclose\def\beamer@colclose{}%
  \begin{actionenv}#3%
  \begin{minipage}[#1]{#2}%
    \leavevmode\raggedright\ignorespaces}
  {\end{minipage}\hfill\end{actionenv}\@ignoretrue}
\let\endcolumn\endbeamer@columnenv

\newcommand<>\beamer@columncom[2][\beamer@colalign]{%
  \beamer@colclose%
  \def\beamer@colclose{\end{minipage}\hfill\end{actionenv}\ignorespaces}%
  \begin{actionenv}#3%
  \begin{minipage}[#1]{#2}%
    \leavevmode\raggedright\ignorespaces
}
  
   
\mode
<article>
{
  \newenvironment<>{beamer@columnenv}[2][]{}{}
  \newcommand<>{\beamer@columncom}[2][]{}
}

   

%
%
% Footnotes
%
%

\def\@makefntext#1{%
  \def\insertfootnotetext{#1}%
  \def\insertfootnotemark{\@makefnmark}%
  \footnotetemplate}
\def\usefootnotetemplate#1{%
  \def\footnotetemplate{#1}}

\usefootnotetemplate{
  \parindent 1em\noindent%
  \hbox to 1.8em{\hfil\insertfootnotemark}\insertfootnotetext}

\newbox\beamer@footins

\long\def\beamer@framefootnotetext#1#2{%
  \global\setbox\beamer@footins\vbox{%
    \unvbox\beamer@footins
    \reset@font\footnotesize
    \hsize\columnwidth
    \@parboxrestore
    \protected@edef\@currentlabel
         {\csname p@footnote\endcsname\@thefnmark}%
    \color@begingroup
      \uncover#1{\@makefntext{%
        \rule\z@\footnotesep\ignorespaces#2\@finalstrut\strutbox}}%
    \color@endgroup}}

\let\@footnotetext=\beamer@framefootnotetext

\define@key{beamerfootnote}{frame}[true]{\let\beamer@footnotetext=\beamer@framefootnotetext\def\beamer@mpfn{footnote}\def\beamer@thempfn{\thefootnote}}

\renewcommand<>{\footnote}[1][]{%
  \let\beamer@footnotetext=\@footnotetext%
  \let\beamer@mpfn=\@mpfn%
  \let\beamer@thempfn=\thempfn%
  \let\beamer@kvorig=\KV@errx%
  \def\beamer@footarg{}%
  \def\KV@errx##1{\edef\beamer@footarg{\@tempa}}%
  \setkeys{beamerfootnote}{#1}%
  \let\KV@errx=\beamer@kvorig%
  \ifx\beamer@footarg\@empty%
    \def\beamer@next{\stepcounter\beamer@mpfn
      \protected@xdef\@thefnmark{\beamer@thempfn}%
      \@footnotemark\beamer@footnotetext{#2}}%
  \else%
    \def\beamer@next{%
      \begingroup
        \csname c@\beamer@mpfn\endcsname\beamer@footarg\relax
        \unrestored@protected@xdef\@thefnmark{\beamer@thempfn}%
      \endgroup
      \@footnotemark\beamer@footnotetext{#2}}%
  \fi%
  \beamer@next}

\mode
<article>
{
  \define@key{beamerfootnote}{frame}[true]{}

\let\beamer@origfootnote=\footnote
  \renewcommand\footnote[1][]{%
    \let\beamer@kvorig=\KV@errx%
    \def\beamer@footarg{}%
    \def\KV@errx##1{\edef\beamer@footarg{\@tempa}}%
    \setkeys{beamerfootnote}{#1}%
    \let\KV@errx=\beamer@kvorig%
    \ifx\beamer@footarg\@empty%
      \edef\beamer@next{\noexpand\beamer@origfootnote}%
    \else%
      \edef\beamer@next{\noexpand\beamer@origfootnote[\beamer@footarg]}%
    \fi%
    \beamer@next}
}


\mode
<all>

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "~/texmf/tex/latex/beamer/examples/beamerexample1.tex"
%%% End: 
