\ProvidesPackage{beamerbaselocalstructure}[2004/01/10 ver 1.20]
\NeedsTeXFormat{LaTeX2e}[1995/12/01]

% Copyright 2003 by Till Tantau <tantau@users.sourceforge.net>.
%
% This program can be redistributed and/or modified under the terms
% of the GNU Public License, version 2.



\presentation

\RequirePackage{enumerate}


%
%
% The \frametitle command
%
%
\long\def\frametitle#1{%
  \beamer@ifempty{#1}{}{%
  \vskip0pt plus -1fill%
  {\gdef\insertframetitle{#1}\beamer@headrenderer}
  \vskip0.25em%
  \ifbeamer@centered
  \vfill%
  \fi}%
}

\long\def\useframetitletemplate#1{\def\beamer@headrenderer{#1}}


\article
{
  \long\def\frametitle#1{\gdef\insertframetitle{#1}\beamer@headrenderer}
  \long\def\useframetitletemplate#1{\def\beamer@headrenderer{#1}}
  \useframetitletemplate{\paragraph{\insertframetitle}\ \par}
}



%
% Alerting
%

\newoverlayenvironment{alertenv}{%
  \beamer@templatestartalert}
  {\beamer@templateendalert}{}{}

\newoverlayenvironment{structureenv}{%
  \beamer@templatestartstructure}
  {\beamer@templateendstructure}{}{}

\newoverlaycommand{\alert}{\beamer@alert}{}
\def\beamer@alert#1{\begin{alertenv}#1\end{alertenv}}

\newoverlaycommand{\structure}{\beamer@structure}{}
\def\beamer@structure#1{\begin{structureenv}#1\end{structureenv}}

\long\def\usealerttemplate#1#2{%
  \def\beamer@templatestartalert{#1}\def\beamer@templateendalert{#2}}
\long\def\usestructuretemplate#1#2{%
  \def\beamer@templatestartstructure{#1}\def\beamer@templateendstructure{#2}}

\usealerttemplate{%
  \def\bmb@scheme{alert}%
  \colorlet{beamerstructure}{beameralert!85!beamerstructure}%
  \colorlet{beamerexample}{beameralert!85!beamerexample}%
  \color{beameralert}}{}
\usestructuretemplate{\color{beamerstructure}}{}


\article
{
  \newoverlayenvironment{alertenv}{\begin{itshape}}{\end{itshape}}{}{}
  \newoverlayenvironment{structureenv}{\begin{bfseries}}{\end{bfseries}}{}{}
  
  \newoverlaycommand{\alert}{\emph}{}
  \newoverlaycommand{\structure}{\textbf}{}
}



%
%
% Predefined Blocks
%
%

\common
{
  \long\def\useblocktemplate#1#2{%
    \def\beamer@beginblocktemplate{#1}
    \def\beamer@endblocktemplate{#2}}

  \long\def\usealertblocktemplate#1#2{%
    \def\beamer@beginalertblocktemplate{#1}
    \def\beamer@endalertblocktemplate{#2}}

  \long\def\useexampleblocktemplate#1#2{%
    \def\beamer@beginexampleblocktemplate{#1}
    \def\beamer@endexampleblocktemplate{#2}}
}
\newoverlayenvironment{block}[1]{%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginblocktemplate}{\par\beamer@endblocktemplate}%
  {\beamer@startcovered%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginblocktemplate}{\par\beamer@endblocktemplate\beamer@endcovered}

\newoverlayenvironment{alertblock}[1]{%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginalertblocktemplate}{\par\beamer@endalertblocktemplate}%
  {\beamer@startcovered%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginalertblocktemplate}{\par\beamer@endalertblocktemplate\beamer@endcovered}

\newoverlayenvironment{exampleblock}[1]{%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginexampleblocktemplate}{\par\beamer@endexampleblocktemplate}%
  {\beamer@startcovered%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginexampleblocktemplate}{\par\beamer@endexampleblocktemplate\beamer@endcovered}

\article
{
  \newoverlayenvironment{block}[1]{%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginblocktemplate}{\par\beamer@endblocktemplate}%
  {\def\insertblockname{#1}\begin{onlyenv}<all:0>}{\end{onlyenv}}

  \newoverlayenvironment{alertblock}[1]{%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginalertblocktemplate}{\par\beamer@endalertblocktemplate}%
  {\def\insertblockname{#1}\begin{onlyenv}<all:0>}{\end{onlyenv}}

  \newoverlayenvironment{exampleblock}[1]{%
  \def\insertblockname{#1}%
  \par%
  \beamer@beginexampleblocktemplate}{\par\beamer@endexampleblocktemplate}%
  {\def\insertblockname{#1}\begin{onlyenv}<all:0>}{\end{onlyenv}}

  \useblocktemplate{\par\medskip{\noindent\textbf{\insertblockname}}\par\noindent\ignorespaces}{\medskip}
  \usealertblocktemplate{\par\medskip{\noindent\textbf{\emph{\insertblockname}}}\par\noindent\ignorespaces}{\medskip}
  \useexampleblocktemplate{\par\medskip{\noindent\emph{\insertblockname}}\par\noindent\ignorespaces}{\medskip}
}

\common
{

  \ifbeamer@blocks
    \newenvironment{Problem}{\begin{block}{Problem}}{\end{block}}
    \newenvironment{Loesung}{\begin{block}{L\"osung}}{\end{block}}
    \newenvironment{Definition}{\begin{block}{Definition}}{\end{block}}
    \newenvironment{Satz}{\begin{block}{Satz}}{\end{block}}
    \newenvironment{Beweis}{\begin{block}{Beweis.}}{\end{block}}
    \newenvironment{Folgerung}{\begin{block}{Folgerung}}{\end{block}}
    \newenvironment{Lemma}{\begin{block}{Lemma}}{\end{block}}
    \newenvironment{Fakt}{\begin{block}{Fakt}}{\end{block}}
    \newenvironment{Beispiel}{\begin{exampleblock}{Beispiel}}{\end{exampleblock}}
    \newenvironment{Beispiele}{\begin{exampleblock}{Beispiele}}{\end{exampleblock}}

    \newenvironment{Theorem}{\begin{block}{Theorem}}{\end{block}}
    \newenvironment{Proof}{\begin{block}{Proof.}}{\end{block}}
    \newenvironment{Corollary}{\begin{block}{Corollary}}{\end{block}}
    \newenvironment{Fact}{\begin{block}{Fact}}{\end{block}}
    \newenvironment{Example}{\begin{exampleblock}{Example}}{\end{exampleblock}}
    \newenvironment{Examples}{\begin{exampleblock}{Examples}}{\end{exampleblock}}

    \newenvironment{definition}{\begin{block}{Definition}}{\end{block}}
    \newenvironment{definitions}{\begin{block}{Definitions}}{\end{block}}
    \newenvironment{theorem}{\begin{block}{Theorem}}{\end{block}}
    \newenvironment{proof}{\begin{block}{Proof.}}{\end{block}}
    \newenvironment{corollary}{\begin{block}{Corollary}}{\end{block}}
    \newenvironment{fact}{\begin{block}{Fact}}{\end{block}}
    \newenvironment{example}{\begin{exampleblock}{Example}}{\end{exampleblock}}
    \newenvironment{examples}{\begin{exampleblock}{Examples}}{\end{exampleblock}}
  \fi

  \newcommand{\BeispielInline}[1]{{\color{black!50!green}Beispiel: \ignorespaces#1}}
  \newcommand{\ExampleInline}[1]{{\color{black!50!green}Example: \ignorespaces#1}}
}



%
% List stuff
%

\setlength\leftmargini  {2em}
\setlength\leftmarginii  {2em}
\setlength  \labelsep  {.5em}
\setlength  \labelwidth{\leftmargini}
\addtolength\labelwidth{-\labelsep}
\renewcommand\theenumi{\@arabic\c@enumi}
\renewcommand\theenumii{\@arabic\c@enumii}

\def\@listi{\leftmargin\leftmargini
            \topsep 4\p@ \@plus2\p@ \@minus\p@
            \parsep 0\p@
            \itemsep4\p@ \@plus2\p@ \@minus2\p@}
\let\@listI\@listi
\def\@listii {\leftmargin\leftmarginii
              \topsep    2\p@ \@plus2\p@ \@minus\p@
              \parsep    0\p@   \@plus\p@  \@minus\p@
              \itemsep   \parsep}

            
%
%
% Enumerations
%
%

\def\enumerate{%
  \ifnum\@enumdepth>1\relax\@toodeep
  \else%
    \advance\@enumdepth\@ne%
    \edef\@enumctr{enum\romannumeral\the\@enumdepth}%
    \advance\@itemdepth\@ne%
  \fi%
  \@ifnextchar[{\beamer@@enum@}{\beamer@enum@}}
\def\beamer@@enum@[#1]{% partly copied from enumerate.sty
  \@enLab{}\let\@enThe\@enQmark
  \@enloop#1\@enum@
  \ifx\@enThe\@enQmark\@warning{The counter will not be printed.%
   ^^J\space\@spaces\@spaces\@spaces The label is: \the\@enLab}\fi
  \expandafter\def\csname label\@enumctr\endcsname{\def\insertenumlabel{\the\@enLab}\beamer@autoenumtemplate}%
  \expandafter\let\csname the\@enumctr\endcsname\@enThe
  \csname c@\@enumctr\endcsname7
  \expandafter\settowidth
            \csname leftmargin\romannumeral\@enumdepth\endcsname
            {\the\@enLab\hspace{\labelsep}}%
  \beamer@enum@}
\def\beamer@enum@{%
  \csname\@enumctr starttemplate\endcsname%
  \expandafter
    \list
      \csname label\@enumctr\endcsname
      {\usecounter\@enumctr%
        \def\makelabel##1{{\hss\llap{##1}}}}%
  \raggedright}
\def\endenumerate{\ifhmode\unskip\fi\endlist\csname\@enumctr endtemplate\endcsname}

\def\useenumerateitemminitemplate#1{%
  \def\beamer@autoenumtemplate{#1}}
\useenumerateitemminitemplate{\color{beamerstructure}\insertenumlabel}


%
%
% Itemize
%
%

\def\itemize{%
  \ifnum \@itemdepth >1\relax\@toodeep\else
    \advance\@itemdepth\@ne
    \edef\@itemitem{labelitem\romannumeral\the\@itemdepth}%
    \edef\@itemctr{item\romannumeral\the\@itemdepth}%
    \csname\@itemctr starttemplate\endcsname%
    \expandafter
    \list
      \csname\@itemitem\endcsname
      {\def\makelabel##1{{\hss\llap{##1}}}}
  \fi%
  \raggedright}
    
\def\enditemize{\ifhmode\unskip\fi\endlist\csname\@itemctr endtemplate\endcsname}

\def\useenumerateitemtemplate#1{% 
  \def\labelenumi{\def\insertenumlabel{\theenumi}#1}}

\def\useenumeratetemplate#1#2{% before and after
  \def\enumistarttemplate{#1}%
  \def\enumiendtemplate{#2}}

\def\usesubenumerateitemtemplate#1{%
  \def\labelenumii{\def\insertenumlabel{\theenumi}\def\insertsubenumlabel{\theenumii}#1}}

\def\usesubenumeratetemplate#1#2{% before and after
  \def\enumiistarttemplate{#1}%
  \def\enumiiendtemplate{#2}}


\def\useitemizeitemtemplate#1{%
  \def\labelitemi{#1}\let\beamer@labelitemi\labelitemi}%itemilabeltemplate{#1}}

\def\useitemizetemplate#1#2{% before and after
  \def\itemistarttemplate{#1}%
  \def\itemiendtemplate{#2}}

\def\usesubitemizeitemtemplate#1{%
  \def\labelitemii{#1}\let\beamer@labelitemii\labelitemii}%itemiilabeltemplate{#1}}

\def\usesubitemizetemplate#1#2{% before and after
  \def\itemiistarttemplate{#1}%
  \def\itemiiendtemplate{#2}}


\def\description{\@ifnextchar[{\@description}{\beamer@descdefault\beamer@descdefaulttemp\@@description}}
\def\@description[#1]{\setbox\beamer@tempbox=\hbox{\def\insertdescriptionitem{#1}\descriptionitemtemplate}%
  \beamer@descdefault\wd\beamer@tempbox\advance\beamer@descdefault by \labelsep\@@description}
\def\@@description{\list{}{\labelwidth\beamer@descdefault\leftmargin\beamer@descdefault\let\makelabel\beamer@descriptionitem}%
  \raggedright}
\def\enddescription{\ifhmode\unskip\fi\endlist}
\long\def\beamer@descriptionitem#1{\def\insertdescriptionitem{#1}%
  \hfil\hspace\labelsep\normalfont\descriptionitemtemplate}

\def\usedescriptionitemtemplate#1#2{\def\descriptionitemtemplate{#1}\global\beamer@descdefaulttemp=#2%
  \global\advance\beamer@descdefaulttemp by \labelsep}
\usedescriptionitemtemplate{\color{beamerstructure}\insertdescriptionitem}{2cm}

\def\usedescriptionitemofwidthas#1{%
  \setbox\beamer@tempbox=\hbox{\def\insertdescriptionitem{#1}\descriptionitemtemplate}%
  \beamer@descdefault\wd\beamer@tempbox\advance\beamer@descdefault by
  \labelsep%
  \beamer@descdefaulttemp=\beamer@descdefault}

\let\beamer@itemize\itemize





  
%
% Abstract command
%

\newoverlayenvironment{abstract}%
{\beamer@templateabstractstart}{\beamer@templateabstractend}
{\beamer@startcovered\beamer@templateabstractstart}{\beamer@templateabstractend\beamer@endcovered}


\newcommand\usetemplateabstract[2]{\def\beamer@templateabstractstart{#1}\def\beamer@templateabstractend{#2}}

\usetemplateabstract{
  \begin{center}%
    \structure{\abstractname}\vspace{-.5em}\vspace{0pt}%
  \end{center}\small%
  \begin{quote}}
  {\end{quote}}



  
%
% Verse, quotation, quote environments
%
    
\newoverlayenvironment{verse}
               {\let\\\@centercr
                \list{}{\itemsep      \z@
                        \itemindent   -1.5em%
                        \listparindent\itemindent
                        \rightmargin  \leftmargin
                        \advance\leftmargin 1.5em
                        \parsep       .75em plus .25em minus.25em}%
                \item\relax\beamer@templateversestart}
               {\beamer@templateverseend\endlist}
               {\beamer@startcovered\let\\\@centercr
                \list{}{\itemsep      \z@
                        \itemindent   -1.5em%
                        \listparindent\itemindent
                        \rightmargin  \leftmargin
                        \advance\leftmargin 1.5em
                        \parsep       .75em plus .25em minus.25em}%
                \item\relax\beamer@templateversestart}
               {\beamer@templateverseend\endlist\beamer@endcovered}

\newcommand\usetemplateverse[2]{\def\beamer@templateversestart{#1}\def\beamer@templateverseend{#2}}
\usetemplateverse{\rmfamily\itshape}{}
               
\newoverlayenvironment{quotation}
               {\list{}{\listparindent 1.5em%
                        \itemindent    \listparindent
                        \rightmargin   \leftmargin
                        \parsep        \z@ \@plus\p@}%
                \item\relax\beamer@templatequotationstart}
               {\beamer@templatequotationend\endlist}
               {\beamer@startcovered\list{}{\listparindent 1.5em%
                        \itemindent    \listparindent
                        \rightmargin   \leftmargin
                        \parsep        \z@ \@plus\p@}%
                \item\relax\beamer@templatequotationstart}
               {\beamer@templatequotationend\endlist\beamer@endcovered}

\newoverlayenvironment{quote}
               {\list{}{\rightmargin\leftmargin}%
                \item\relax\beamer@templatequotationstart}
               {\beamer@templatequotationend\endlist}
               {\beamer@startcovered\list{}{\rightmargin\leftmargin}%
                \item\relax\beamer@templatequotationstart}
               {\beamer@templatequotationend\endlist\beamer@endcovered}

% applies both to quote and quotation
\newcommand\usetemplatequotation[2]{\def\beamer@templatequotationstart{#1}\def\beamer@templatequotationend{#2}}
\usetemplatequotation{\itshape}{}


\article
{
  \renewoverlayenvironment{verse}{\begin{originalverse}}{\end{originalverse}}{\begin{onlyenv}<all:0>}{\end{onlyenv}}
  \renewoverlayenvironment{quotation}{\begin{originalquotation}}{\end{originalquotation}}{\begin{onlyenv}<all:0>}{\end{onlyenv}}
  \renewoverlayenvironment{quote}{\begin{originalquote}}{\end{originalquote}}{\begin{onlyenv}<all:0>}{\end{onlyenv}}
}

    
%
% Bibliography code
%
\newenvironment{thebibliography}[1]
{%\leavevmode\unskip%
  \list{\@biblabel{\@arabic\c@enumiv}}%
           {\settowidth\labelwidth{\beamer@biblabeltemplate{\@biblabel{#1}}}%
            \leftmargin\labelwidth
            \advance\leftmargin\labelsep
            \itemsep=0pt%
            \partopsep=0pt%
            \usecounter{enumiv}%
            \let\p@enumiv\@empty
            \renewcommand\theenumiv{\@arabic\c@enumiv}
            \let\makelabel\beamer@biblabeltemplate}%
      \sloppy\raggedright
      \clubpenalty10000
      \@clubpenalty \clubpenalty
      \widowpenalty10000%
      \sfcode`\.\@m}
     {\def\@noitemerr
       {\@latex@warning{Empty `thebibliography' environment}}%
      \ifhmode\unskip\fi\endlist}

\long\def\beamer@biblabeltemplate#1{\def\insertbiblabel{#1}\biblabeltemplate\hfil}

\def\bibitem{\@ifnextchar<{\beamer@bibitem@store}{\gdef\beamer@bibstore{}\beamer@plainbibitem}}
\def\beamer@bibitem@store<#1>{\gdef\beamer@bibstore{<#1>}\beamer@plainbibitem}
\def\beamer@plainbibitem{\@ifnextchar[\@lbibitem\@bibitem}
\def\@lbibitem[#1]#2{\expandafter\item\beamer@bibstore[\@biblabel{#1}\hfill]%
  \@ifundefined{beamerbib@#2@\the\c@framenumber}{\if@filesw
    {\let\protect\noexpand
      \immediate
      \write\@auxout{\string\bibcite{#2}{#1}}}\fi%
    \global\@namedef{beamerbib@#2@\the\c@framenumber}{\relax}}{}%
  \def\newblock{\@newblock}\newblock\hbox{}\ignorespaces}
\def\@bibitem#1{\expandafter\item\beamer@bibstore\@ifundefined{beamerbib@#1@\the\c@framenumber}%
  {\if@filesw \immediate\write\@auxout
    {\string\bibcite{#1}{\the\value{\@listctr}}}\fi\global\@namedef{beamerbib@#1@\the\c@framenumber}{\relax}}%
  {}%
  \def\newblock{\@newblock}\newblock\ignorespaces}

\def\@newblock{\firstblocktemplate%
  \def\newblock{\secondblocktemplate%
    \def\newblock{\thirdblocktemplate%
      \def\newblock{\otherblocktemplate}}}%
  \setbox\beamer@tempbox=\hbox{\ }\hskip-\wd\beamer@tempbox\setbox\beamer@tempbox=\hbox{}\ht\beamer@tempbox=1.5em\box\beamer@tempbox}

\long\def\usebibitemtemplate#1{%
  \def\biblabeltemplate{#1}}

\long\def\usebibliographyblocktemplate#1#2#3#4{%
  \def\firstblocktemplate{#1}%
  \def\secondblocktemplate{#2}%
  \def\thirdblocktemplate{#3}%
  \def\otherblocktemplate{#4}}

\beamertemplatearticlebibitems
\usebibliographyblocktemplate
  {\color{beamerstructure}}
  {\par\color{black}}
  {\par\color{beamerstructure!65}}
  {\par\color{beamerstructure!65}}


\article
{
  \AtBeginDocument{
    \renewoverlaycommand{\bibitem}%
    {\beameroriginal{\bibitem}}%
    {\beameroriginal{\bibitem}}%should actually suppress
  }
}

  

%
% Floats and tables
%

\newenvironment{figure}[1][]{%
  \def\@captype{figure}%
  \begin{center}}
  {\end{center}}
\newcounter{figure}
\renewcommand\thefigure{\@arabic\c@figure}

\newenvironment{table}[1][]{%
  \def\@captype{table}%
  \begin{center}}
  {\end{center}}
\newcounter{table}
\renewcommand\thetable{\@arabic\c@table}

\newlength\abovecaptionskip
\newlength\belowcaptionskip
\setlength\abovecaptionskip{7pt}
\setlength\belowcaptionskip{7pt}

\def\caption{
  \ifx\@captype\@undefined
    \@latex@error{\noexpand\caption outside figure or table}\@ehd
    \expandafter\@gobble
 \else
   \refstepcounter\@captype
   \expandafter\@firstofone
 \fi
 {\@dblarg{\@caption\@captype}}%
}
\long\def\@caption#1[#2]#3{% second argument ignored
  \par
  \begingroup
    \@parboxrestore
    \if@minipage
      \@setminipage
    \fi
    \normalsize
    \beamer@makecaption{#1}{\ignorespaces #3}\par
    \endgroup}
\long\def\beamer@makecaption#1#2{%
  \def\insertcaptionname{\csname#1name\endcsname}%
  \def\insertcaptionnumber{\csname the#1\endcsname}%
  \def\insertcaption{#2}%
  \vskip\abovecaptionskip
  \sbox\@tempboxa{\beamer@captiontemplate}%
  \ifdim \wd\@tempboxa >\hsize
    \beamer@captiontemplate\par
  \else
    \global \@minipagefalse
    \hb@xt@\hsize{\hfil\box\@tempboxa\hfil}%
  \fi
  \vskip\belowcaptionskip}

\long\def\usecaptiontemplate#1{%
  \def\beamer@captiontemplate{#1}}
\usecaptiontemplate{%
  {\small\structure{\insertcaptionname:} \insertcaption}}


\common


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "~/texmf/tex/latex/beamer/examples/beamerexample1.tex"
%%% End: 
