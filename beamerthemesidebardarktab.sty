\ProvidesPackage{beamerthemesidebardarktab}[2003/10/29 ver 0.92]
\NeedsTeXFormat{LaTeX2e}[1995/12/01]

% Copyright 2003 by Till Tantau <tantau@cs.tu-berlin.de>.
%
% This program can be redistributed and/or modified under the terms
% of the LaTeX Project Public License Distributed from CTAN
% archives in directory macros/latex/base/lppl.txt.

\RequirePackage{keyval}[1997/11/10]
\RequirePackage{pgfshade}

\def\ProcessOptionsWithKV#1{%
  \let\@tempa\@empty
  \@for\CurrentOption:=\@classoptionslist\do{%
    \@ifundefined{KV@#1@\CurrentOption}%
    {}{\edef\@tempa{\@tempa,\CurrentOption,}}}%
  \edef\@tempa{%
    \noexpand\setkeys{#1}{\@tempa\@ptionlist{\@currname.\@currext}}}%
  \@tempa
  \AtEndOfPackage{\let\@unprocessedoptions\relax}}

\newdimen\beamer@sidebarwidth
\beamer@sidebarwidth=2.5cm
\define@key{Side}{width}{\beamer@sidebarwidth=#1}
\ProcessOptionsWithKV{Side}

                                % Title page  
\usetitlepagetemplate{
  \vbox{}
  \vfill
  \begin{centering}
    \Large\structure{\bfseries\inserttitle}
    \vskip1em\par
    \normalsize\insertauthor\vskip1em\par
    {\scriptsize\insertinstitute\par}\par\vskip1em
    \insertdate\par\vskip1.5em
    \inserttitlegraphic
  \end{centering}
  \vfill
}

\pgfdeclarehorizontalshading{beamer@tabmain}{6.5pt}
{color(0pt)=(white);
  color(\beamer@sidebarwidth)=(structure!50!averagebackgroundcolor)}
\pgfdeclarehorizontalshading{beamer@tab}{6.5pt}{%
  color(0pt)=(white);
  color(9pt)=(structure!50!averagebackgroundcolor);
  color(\beamer@sidebarwidth)=(structure)}


                                % Frametitles
\useframetitletemplate{%
  {\leftskip-\beamer@leftmargin\advance\leftskip by0.3cm%
   \rightskip-\beamer@rightmargin plus1fil\advance\rightskip by0.3cm\vskip0.3cm\leavevmode
    \color{structure}
    \Large\bfseries\insertframetitle\par}%
  }

                                % Sections in headline
\usesectionsidetemplate
{%
  \setbox\tempbox=\hbox{%
    \color[gray]{0.3}\lower1pt\hbox{\pgfuseshading{beamer@tab}}%\vrule width\beamer@sidebarwidth height 6.5pt}%
    \hskip-\beamer@sidebarwidth%
    \color{structure}\tiny{\kern3pt\bfseries\insertsectionhead}}%
  \ht\tempbox=8pt%
  \dp\tempbox=2pt%
  \wd\tempbox=\beamer@sidebarwidth%
  \box\tempbox%
}
{%
  \setbox\tempbox=\hbox{\color{structure!50}\tiny{\kern3pt\bfseries\insertsectionhead}}%
  \ht\tempbox=8pt%
  \dp\tempbox=2pt%
  \wd\tempbox=\beamer@sidebarwidth%
  \box\tempbox%
}

\usesubsectionsidetemplate
{%
  \setbox\tempbox=\hbox{%
    \color[gray]{0.3}\lower1pt\hbox{\pgfuseshading{beamer@tab}}%\vrule width\beamer@sidebarwidth height 6.5pt}%
    \hskip-\beamer@sidebarwidth%
    \color{white}\tiny{\kern6pt\bfseries\insertsubsectionhead}}%
  \ht\tempbox=5pt%
  \dp\tempbox=2pt%
  \wd\tempbox=\beamer@sidebarwidth%
  \box\tempbox%
}
{%
  \setbox\tempbox=\hbox{\color{white}\tiny{\kern6pt\bfseries\insertsubsectionhead}}%
  \ht\tempbox=5pt%
  \dp\tempbox=2pt%
  \wd\tempbox=\beamer@sidebarwidth%
  \box\tempbox%
}
                                % Entries in table of contents
\usetemplatetocsection[50!averagebackgroundcolor]
{\color{structure}\textbf{\inserttocsection}}

                                % Head
\useheadtemplate{}

                                % Foot
\usefoottemplate{}

                                % Sidebar
\userightsidebartemplate{\beamer@sidebarwidth}{%
  \vskip1em
  \beamer@tempdim=\beamer@sidebarwidth%
  \advance\beamer@tempdim by -3pt%
  \hbox{%
    \hskip 3pt%
    \begin{minipage}{\beamer@tempdim}
      \leftskip0pt plus1fill%
      \rightskip0pt plus1fill%
      \tiny\color{white}\bfseries\insertshorttitle%
      \vskip.5em
      \color{structure!50}\insertshortauthor
    \end{minipage}}%
  \vskip1em
  \insertverticalnavigation{\beamer@sidebarwidth}%
  \vfill
  \hbox to \beamer@sidebarwidth{\hfil\insertlogo\hskip3pt}
  \vskip3pt
}

                                % Sidebar Background
\userightsidebarverticalshadingtemplate{structure}{black}

                                % Background
\usebackgroundtemplate{}

                                % Blocks
\useblocktemplate{\medskip{\color{structure}\large{\insertblockname}}\par}{\medskip}
\usealertblocktemplate{\medskip{\alert{\large{\insertblockname}}}\par}{\medskip}
\useexampleblocktemplate{\medskip\begingroup{\color{structure!50!green}\large{\insertblockname}}\par%
\color{black!50!green}}{\endgroup\medskip}
 
                                % Margins
\beamersetleftmargin{0.5cm}
\beamersetrightmargin{0.5cm}
